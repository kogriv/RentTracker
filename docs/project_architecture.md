# –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê
## –°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∞—Ä–µ–Ω–¥–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π

---

## 1. –ü–†–ò–ù–¶–ò–ü–´ –ê–†–•–ò–¢–ï–ö–¢–£–†–´

### 1.1 –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –¥–ª—è –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö
- **–ü–æ—ç—Ç–∞–ø–Ω–æ—Å—Ç—å**: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç —è–¥—Ä–∞ –∫ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏
- **–ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è**: –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1.2 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Å–ª–æ–∏
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ        INTERFACE LAYER              ‚îÇ  ‚Üê CLI, Web, Bot (–ø–æ—ç—Ç–∞–ø–Ω–æ)
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ        APPLICATION LAYER            ‚îÇ  ‚Üê –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, —Å—Ü–µ–Ω–∞—Ä–∏–∏
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ        DOMAIN LAYER                 ‚îÇ  ‚Üê –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã, –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ        INFRASTRUCTURE LAYER         ‚îÇ  ‚Üê –§–∞–π–ª—ã, –ø–∞—Ä—Å–µ—Ä—ã, –æ—Ç—á–µ—Ç—ã
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 2. –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

### 2.1 –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```
garage-payment-tracker/
‚îÇ
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ core/                          # –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã (Domain Layer)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ garage.py              # –ú–æ–¥–µ–ª—å –≥–∞—Ä–∞–∂–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment.py             # –ú–æ–¥–µ–ª—å –ø–ª–∞—Ç–µ–∂–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ transaction.py         # –ú–æ–¥–µ–ª—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ report.py              # –ú–æ–¥–µ–ª—å –æ—Ç—á–µ—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment_matcher.py     # –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ date_calculator.py     # –†–∞—Å—á–µ—Ç –¥–∞—Ç
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ status_determiner.py   # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ exceptions.py              # –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ parsers/                       # Infrastructure Layer - –ü–∞—Ä—Å–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ parser_interface.py    # –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–∞—Ä—Å–µ—Ä–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ parser_factory.py      # –§–∞–±—Ä–∏–∫–∞ –ø–∞—Ä—Å–µ—Ä–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ file_parsers/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ excel_parser.py        # –ü–∞—Ä—Å–∏–Ω–≥ Excel —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sberbank_parser.py     # –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –ø–∞—Ä—Å–µ—Ä –°–±–µ—Ä–±–∞–Ω–∫–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ llm_parsers/               # –î–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ llm_parser.py          # LLM-–ø–∞—Ä—Å–µ—Ä (–∑–∞–≥–ª—É—à–∫–∞)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ application/                   # Application Layer - –°—Ü–µ–Ω–∞—Ä–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ use_cases/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ process_payments.py    # –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ generate_report.py     # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dto/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ payment_request.py     # DTO –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ report_response.py     # DTO –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ interfaces/                    # Interface Layer - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cli/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cli_app.py            # CLI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ commands/
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ process_command.py
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ report_command.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ web/                       # –î–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ web_app.py            # Flask/FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ bot/                       # –î–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ telegram_bot.py       # Telegram –±–æ—Ç
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ infrastructure/                # Infrastructure Layer - –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ file_handlers/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ excel_reader.py       # –ß—Ç–µ–Ω–∏–µ Excel —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ excel_writer.py       # –ó–∞–ø–∏—Å—å Excel —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config_manager.py     # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ settings.py           # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ localization/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ i18n.py              # –°–∏—Å—Ç–µ–º–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ messages_en.json     # –ê–Ω–≥–ª–∏–π—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ messages_ru.json     # –†—É—Å—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–±—É–¥—É—â–µ–µ)
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îú‚îÄ‚îÄ date_utils.py             # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞—Ç–∞–º–∏
‚îÇ       ‚îú‚îÄ‚îÄ validation.py             # –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îÇ       ‚îî‚îÄ‚îÄ logging_config.py         # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ default_config.yaml           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
‚îÇ   ‚îî‚îÄ‚îÄ parser_rules.yaml             # –ü—Ä–∞–≤–∏–ª–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞
‚îÇ
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ unit/                         # –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã (TDD)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_garage.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_payment.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ test_transaction.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ test_payment_matcher.py
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ test_date_calculator.py
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ test_status_determiner.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ parsers/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_excel_parser.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ test_sberbank_parser.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ application/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ test_process_payments_use_case.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ infrastructure/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ test_config_manager.py
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ test_localization.py
‚îÇ   ‚îú‚îÄ‚îÄ integration/                  # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_full_payment_flow.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ test_cli_integration.py
‚îÇ   ‚îú‚îÄ‚îÄ fixtures/                     # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –º–æ–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sample_arenda.xlsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sample_statement.xlsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mock_data.py
‚îÇ   ‚îî‚îÄ‚îÄ conftest.py                   # Pytest –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –æ–±—â–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã
‚îÇ
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ architecture.md               # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ user_guide.md                 # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ
‚îú‚îÄ‚îÄ requirements.txt                  # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ requirements-dev.txt              # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (pytest, coverage, etc.)
‚îú‚îÄ‚îÄ setup.py                         # –£—Å—Ç–∞–Ω–æ–≤–æ—á–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
‚îú‚îÄ‚îÄ pytest.ini                       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest
‚îú‚îÄ‚îÄ .coverage                        # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞
‚îú‚îÄ‚îÄ Makefile                         # –ö–æ–º–∞–Ω–¥—ã –¥–ª—è TDD workflow
‚îî‚îÄ‚îÄ main.py                          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```

---

## 3. –ö–õ–Æ–ß–ï–í–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´

### 3.1 Core Models (–î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏)

```python
# src/core/models/garage.py
@dataclass
class Garage:
    id: str
    monthly_rent: Decimal
    payment_day: int
    start_date: date
    
# src/core/models/payment.py
@dataclass  
class Payment:
    garage_id: str
    amount: Decimal
    expected_date: date
    actual_date: Optional[date]
    status: PaymentStatus
    
# src/core/models/transaction.py
@dataclass
class Transaction:
    date: date
    amount: Decimal
    category: str
    source: str
```

### 3.2 Parser Interface (–ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞)

```python
# src/parsers/base/parser_interface.py
from abc import ABC, abstractmethod

class StatementParser(ABC):
    @abstractmethod
    def parse_transactions(self, source) -> List[Transaction]:
        """–ü–∞—Ä—Å–∏–Ω–≥ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–∞"""
        pass
    
    @abstractmethod
    def validate_source(self, source) -> bool:
        """–í–∞–ª–∏–¥–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö"""
        pass

# src/parsers/base/parser_factory.py
class ParserFactory:
    def create_parser(self, parser_type: str) -> StatementParser:
        if parser_type == "excel":
            return ExcelStatementParser()
        elif parser_type == "llm":
            return LLMStatementParser()  # –ë—É–¥—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
        else:
            raise ValueError(f"Unknown parser type: {parser_type}")
```

### 3.3 Application Use Cases (–°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)

```python
# src/application/use_cases/process_payments.py
class ProcessPaymentsUseCase:
    def __init__(self, parser_factory, payment_matcher, status_determiner):
        self.parser_factory = parser_factory
        self.payment_matcher = payment_matcher
        self.status_determiner = status_determiner
    
    def execute(self, request: PaymentProcessRequest) -> PaymentProcessResponse:
        # 1. –ü–∞—Ä—Å–∏–Ω–≥ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –≥–∞—Ä–∞–∂–µ–π
        # 2. –ü–∞—Ä—Å–∏–Ω–≥ –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –≤—ã–ø–∏—Å–∫–∏  
        # 3. –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π
        # 4. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤
        # 5. –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        pass
```

### 3.4 Configuration System (–°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)

```yaml
# config/default_config.yaml
application:
  name: "Garage Payment Tracker"
  version: "1.0.0"
  default_language: "en"

parsing:
  grace_period_days: 3
  search_window_days: 7
  date_formats: ["DD.MM.YYYY", "DD/MM/YYYY"]
  
parsers:
  default: "excel"
  available: ["excel", "llm"]
  
output:
  format: "xlsx"
  include_summary: true
```

### 3.5 Localization System (–°–∏—Å—Ç–µ–º–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏)

```python
# src/infrastructure/localization/i18n.py
class LocalizationManager:
    def __init__(self, language="en"):
        self.language = language
        self.messages = self._load_messages()
    
    def get(self, key: str, **kwargs) -> str:
        message = self.messages.get(key, key)
        return message.format(**kwargs) if kwargs else message
```

```json
// src/infrastructure/localization/messages_en.json
{
  "status.received": "Received",
  "status.overdue": "Overdue", 
  "status.pending": "Pending",
  "error.file_not_found": "File not found: {filename}",
  "report.generated": "Report generated successfully"
}
```

---

## 9. –ü–û–≠–¢–ê–ü–ù–´–ô –ü–õ–ê–ù –†–ê–ó–†–ê–ë–û–¢–ö–ò

### 9.1 –≠—Ç–∞–ø 1: –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —è–¥—Ä–æ (MVP)

**–¶–µ–ª—å:** –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- Core models (Garage, Payment, Transaction)
- Excel parser –¥–ª—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –∏ –≤—ã–ø–∏—Å–∫–∏ –°–±–µ—Ä–±–∞–Ω–∫–∞
- –ë–∞–∑–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
- CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –∫–æ–º–∞–Ω–¥–æ–π `process-payments`
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Excel –æ—Ç—á–µ—Ç–∞

**–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- ‚úÖ **–†–∞–±–æ—Ç–∞—é—â–∏–π CLI**: `python main.py process-payments --garage-file arenda.xlsx --statement-file print2.xlsx`
- ‚úÖ **–ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö**: —á—Ç–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –≥–∞—Ä–∞–∂–µ–π –∏ –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –≤—ã–ø–∏—Å–∫–∏
- ‚úÖ **–°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π**: –ø–æ–∏—Å–∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π –ø–æ —Ç–æ—á–Ω–æ–π —Å—É–º–º–µ
- ‚úÖ **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤**: Received, Overdue, Pending, NotDue
- ‚úÖ **Excel –æ—Ç—á–µ—Ç**: —Ñ–∞–π–ª —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏ (Garage, Amount, Expected Date, Actual Date, Status, Notes)
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**: 15 –≥–∞—Ä–∞–∂–µ–π, 66 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏–∑ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (TDD):**
- –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –º–æ–¥–µ–ª–µ–π –ø—Ä–æ—Ö–æ–¥—è—Ç
- –ü–∞—Ä—Å–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –≤—Å–µ 66 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –°–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç 10+ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –∏–∑ 14 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å—É–º–º
- CLI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —á–∏—Ç–∞–µ–º—ã–π Excel –æ—Ç—á–µ—Ç

### 9.2 –≠—Ç–∞–ø 2: –£–ª—É—á—à–µ–Ω–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞

**–¶–µ–ª—å:** –ë–æ–ª–µ–µ –≥–∏–±–∫–∏–π –∏ –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –≤ —Å—Ç–æ—Ä–æ–Ω—É Parser Interface
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞

**–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- ‚úÖ **–ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –ø–∞—Ä—Å–µ—Ä–æ–≤**: StatementParser –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –±–∞–Ω–∫–æ–≤
- ‚úÖ **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ –ø—Ä–∞–≤–∏–ª–∞**: YAML —Ñ–∞–π–ª —Å –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏ –¥–∞—Ç –∏ —Å—É–º–º
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö
- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –∑–∞–ø–∏—Å—å –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤ –ª–æ–≥-—Ñ–∞–π–ª
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ñ–∞–π–ª–æ–≤ –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ edge cases**: –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏, –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (TDD):**
- –¢–µ—Å—Ç—ã –ø–∞—Ä—Å–µ—Ä–æ–≤ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –≤—Ö–æ–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç
- –°–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- –õ–æ–≥–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–µ

### 9.3 –≠—Ç–∞–ø 3: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

**–¶–µ–ª—å:** –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- –°–∏—Å—Ç–µ–º–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ (—Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫)
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- ‚úÖ **–†—É—Å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: `--lang ru` –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç CLI –∏ –æ—Ç—á–µ—Ç—ã –Ω–∞ —Ä—É—Å—Å–∫–∏–π
- ‚úÖ **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞**: —Å–≤–æ–¥–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ –∫–æ–Ω—Ü–µ –æ—Ç—á–µ—Ç–∞
- ‚úÖ **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã**: "–ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ" –¥–ª—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
- ‚úÖ **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ –ø—Ä–∞–≤–∏–ª–∞**: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ª—å–≥–æ—Ç–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤, –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫–æ–Ω
- ‚úÖ **–£–ª—É—á—à–µ–Ω–Ω—ã–µ –æ—Ç—á–µ—Ç—ã**: –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏ (Days Overdue, Next Payment Date)
- ‚úÖ **–ó–∞–≥–æ—Ç–æ–≤–∫–∞ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞**: –±–∞–∑–æ–≤–∞—è HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (TDD):**
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### 9.4 –≠—Ç–∞–ø 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

**–¶–µ–ª—å:** LLM –ø–∞—Ä—Å–∏–Ω–≥ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- LLM Parser –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –≤—ã–ø–∏—Å–æ–∫
- Telegram –±–æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á

**–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- ‚úÖ **LLM –ø–∞—Ä—Å–µ—Ä**: –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤—ã–ø–∏—Å–∫–∏ –≤ ChatGPT/Claude –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- ‚úÖ **Telegram –±–æ—Ç**: –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ –±–æ—Ç–∞, –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–∞
- ‚úÖ **REST API**: —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- ‚úÖ **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- ‚úÖ **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –æ—Ç–ø—Ä–∞–≤–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ –æ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–∞—Ö
- ‚úÖ **–ò—Å—Ç–æ—Ä–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏**: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∑–∞–ø—É—Å–∫–æ–≤

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (TDD):**
- LLM –ø–∞—Ä—Å–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
- API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é

### 9.5 –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–§–∏–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç:**
- üéØ **CLI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** —Å –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é
- üìä **–¢–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –≤—ã–ø–∏—Å–æ–∫ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
- ü§ñ **–ò–ò-–ø–∞—Ä—Å–∏–Ω–≥** –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
- üåê **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –∏ **Telegram –±–æ—Ç**
- üîß **REST API** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- üìà **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å**
- üåç **–ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å** (–∞–Ω–≥–ª–∏–π—Å–∫–∏–π/—Ä—É—Å—Å–∫–∏–π)
- ‚öôÔ∏è **–ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –±–∞–Ω–∫–∏, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–∑–æ–≤–æ–≥–æ –∫–æ–¥–∞.

---

## 10. –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï –ü–ê–¢–¢–ï–†–ù–´

### 5.1 Dependency Injection
```python
# main.py
def create_app() -> Application:
    config = ConfigManager.load_config()
    
    # Infrastructure
    parser_factory = ParserFactory()
    excel_reader = ExcelReader()
    excel_writer = ExcelWriter()
    
    # Core services
    payment_matcher = PaymentMatcher(config.parsing)
    status_determiner = StatusDeterminer(config.parsing)
    
    # Application services
    process_use_case = ProcessPaymentsUseCase(
        parser_factory, payment_matcher, status_determiner
    )
    
    # Interface
    cli_app = CLIApp(process_use_case, config.localization)
    
    return cli_app
```

### 5.2 Strategy Pattern (–¥–ª—è –ø–∞—Ä—Å–µ—Ä–æ–≤)
```python
class PaymentProcessor:
    def __init__(self, parser_strategy: StatementParser):
        self.parser = parser_strategy
    
    def set_parser(self, parser: StatementParser):
        self.parser = parser
    
    def process(self, statement_source):
        return self.parser.parse_transactions(statement_source)
```

### 5.3 Factory Pattern (–¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
```python
class ComponentFactory:
    @staticmethod
    def create_parser(config: dict) -> StatementParser:
        parser_type = config.get('parsers', {}).get('default', 'excel')
        return ParserFactory().create_parser(parser_type)
    
    @staticmethod  
    def create_interface(interface_type: str, use_cases: dict):
        if interface_type == "cli":
            return CLIApp(use_cases)
        elif interface_type == "web":
            return WebApp(use_cases)
        # –∏ —Ç.–¥.
```

---

## 11. –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ò –†–ê–°–®–ò–†–Ø–ï–ú–û–°–¢–¨

### 6.1 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `default_config.yaml` - –æ—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- `parser_rules.yaml` - –ø—Ä–∞–≤–∏–ª–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –±–∞–Ω–∫–æ–≤
- `messages_*.json` - —Ç–µ–∫—Å—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö

### 6.2 –ú–µ—Ö–∞–Ω–∏–∑–º –ø–ª–∞–≥–∏–Ω–æ–≤ (–¥–ª—è –±—É–¥—É—â–µ–≥–æ)
```python
# src/plugins/plugin_interface.py
class Plugin(ABC):
    @abstractmethod
    def initialize(self, config: dict):
        pass
    
    @abstractmethod  
    def get_parser(self) -> Optional[StatementParser]:
        pass
        
    @abstractmethod
    def get_interface(self) -> Optional[UserInterface]:
        pass
```

### 6.3 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
```yaml
# config/business_rules.yaml
payment_matching:
  exact_amount_match: true
  tolerance_percentage: 0.0
  search_window_days: 7
  grace_period_days: 3

status_determination:
  overdue_threshold_days: 3
  pending_grace_period: 3
  future_payment_window: 30
```

---

## 7. –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –ê–†–•–ò–¢–ï–ö–¢–£–†–´

### 7.1 –ü—Ä–æ—Å—Ç–æ—Ç–∞
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–µ–≤
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- –ü—Ä–æ—Å—Ç—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

### 7.2 –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å
- –ù–æ–≤—ã–µ –ø–∞—Ä—Å–µ—Ä—ã —á–µ—Ä–µ–∑ Strategy Pattern
- –ù–æ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —á–µ—Ä–µ–∑ Factory Pattern
- –ù–æ–≤–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

### 7.3 –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ú–æ–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 7.4 –ü–æ—ç—Ç–∞–ø–Ω–æ—Å—Ç—å
- –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –º–æ–¥—É–ª–∏
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–º–µ–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

---

## 8. TDD (TEST-DRIVEN DEVELOPMENT) –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

### 8.1 TDD –ü—Ä–∏–Ω—Ü–∏–ø—ã –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ

**Red-Green-Refactor —Ü–∏–∫–ª:**
1. **Red**: –ù–∞–ø–∏—Å–∞—Ç—å –ø–∞–¥–∞—é—â–∏–π —Ç–µ—Å—Ç –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
2. **Green**: –ù–∞–ø–∏—Å–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–¥ –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∞
3. **Refactor**: –£–ª—É—á—à–∏—Ç—å –∫–æ–¥, —Å–æ—Ö—Ä–∞–Ω—è—è —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è TDD:**
- **–í—ã—Å–æ–∫–∞—è —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**: –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã –≤ –∏–∑–æ–ª—è—Ü–∏–∏
- **–í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**: –î–ª—è –ø–æ–¥–º–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–æ–∫–∞–º–∏
- **–ß–µ—Ç–∫–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã**: –ê–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç-–¥—É–±–ª–µ—Ä–æ–≤
- **–ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã**: –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ —é–Ω–∏—Ç-—Ç–µ—Å—Ç–∞—Ö

### 8.2 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ unit/                    # –ë—ã—Å—Ç—Ä—ã–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ core/               # –¢–µ—Å—Ç—ã –¥–æ–º–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ parsers/            # –¢–µ—Å—Ç—ã –ø–∞—Ä—Å–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ application/        # –¢–µ—Å—Ç—ã use cases
‚îÇ   ‚îî‚îÄ‚îÄ infrastructure/     # –¢–µ—Å—Ç—ã —É—Ç–∏–ª–∏—Ç
‚îú‚îÄ‚îÄ integration/            # –¢–µ—Å—Ç—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ fixtures/               # –û–±—â–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îî‚îÄ‚îÄ conftest.py            # Pytest —Ñ–∏–∫—Å—Ç—É—Ä—ã
```

### 8.3 –ü—Ä–∏–º–µ—Ä—ã TDD —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

#### –î–æ–º–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å —Å —Ç–µ—Å—Ç–∞–º–∏
```python
# tests/unit/core/models/test_garage.py
import pytest
from decimal import Decimal
from datetime import date
from src.core.models.garage import Garage

class TestGarage:
    def test_garage_creation_with_valid_data(self):
        # Arrange & Act
        garage = Garage(
            id="1",
            monthly_rent=Decimal("3500.00"),
            payment_day=15,
            start_date=date(2025, 1, 15)
        )
        
        # Assert
        assert garage.id == "1"
        assert garage.monthly_rent == Decimal("3500.00")
        assert garage.payment_day == 15
        assert garage.start_date == date(2025, 1, 15)
    
    def test_garage_creation_with_invalid_payment_day_raises_error(self):
        # Arrange & Act & Assert
        with pytest.raises(ValueError, match="Payment day must be between 1 and 31"):
            Garage(
                id="1",
                monthly_rent=Decimal("3500.00"),
                payment_day=32,  # Invalid day
                start_date=date(2025, 1, 15)
            )
    
    def test_garage_next_payment_date_calculation(self):
        # Arrange
        garage = Garage(
            id="1",
            monthly_rent=Decimal("3500.00"),
            payment_day=15,
            start_date=date(2025, 1, 15)
        )
        
        # Act
        next_payment = garage.get_next_payment_date(date(2025, 2, 1))
        
        # Assert
        assert next_payment == date(2025, 2, 15)
```

```python
# src/core/models/garage.py (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤)
from dataclass import dataclass
from decimal import Decimal
from datetime import date, datetime
from calendar import monthrange

@dataclass
class Garage:
    id: str
    monthly_rent: Decimal
    payment_day: int
    start_date: date
    
    def __post_init__(self):
        if not 1 <= self.payment_day <= 31:
            raise ValueError("Payment day must be between 1 and 31")
    
    def get_next_payment_date(self, current_date: date) -> date:
        """Calculate next payment date based on payment day"""
        year = current_date.year
        month = current_date.month
        
        # If current day is past payment day, next payment is next month
        if current_date.day > self.payment_day:
            month += 1
            if month > 12:
                month = 1
                year += 1
        
        # Handle month-end edge cases
        days_in_month = monthrange(year, month)[1]
        payment_day = min(self.payment_day, days_in_month)
        
        return date(year, month, payment_day)
```

#### –ü–∞—Ä—Å–µ—Ä —Å –º–æ–∫–∞–º–∏
```python
# tests/unit/parsers/test_excel_parser.py
import pytest  
from unittest.mock import Mock, patch
from src.parsers.file_parsers.excel_parser import ExcelStatementParser
from src.core.models.transaction import Transaction

class TestExcelStatementParser:
    def test_parse_transactions_returns_valid_transactions(self):
        # Arrange
        parser = ExcelStatementParser()
        mock_excel_data = [
            ['12.06.2025 12:00', '12:00', '', '–ü–µ—Ä–µ–≤–æ–¥ –Ω–∞ –∫–∞—Ä—Ç—É', '+2 750,00'],
            ['11.06.2025 11:30', '11:30', '', '–ü–µ—Ä–µ–≤–æ–¥ –°–ë–ü', '+3 500,00']
        ]
        
        with patch('src.parsers.file_parsers.excel_parser.read_excel') as mock_read:
            mock_read.return_value = mock_excel_data
            
            # Act
            transactions = parser.parse_transactions('fake_file.xlsx')
            
            # Assert
            assert len(transactions) == 2
            assert transactions[0].amount == 2750.00
            assert transactions[0].date.strftime('%d.%m.%Y') == '12.06.2025'
            assert transactions[1].amount == 3500.00
            assert transactions[1].category == '–ü–µ—Ä–µ–≤–æ–¥ –°–ë–ü'
    
    def test_parse_transactions_with_invalid_format_raises_error(self):
        # Arrange
        parser = ExcelStatementParser()
        
        with patch('src.parsers.file_parsers.excel_parser.read_excel') as mock_read:
            mock_read.side_effect = FileNotFoundError("File not found")
            
            # Act & Assert
            with pytest.raises(FileNotFoundError):
                parser.parse_transactions('non_existent_file.xlsx')
```

#### Use Case —Å –∏–Ω—ä–µ–∫—Ü–∏–µ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```python
# tests/unit/application/test_process_payments_use_case.py
import pytest
from unittest.mock import Mock
from src.application.use_cases.process_payments import ProcessPaymentsUseCase
from src.application.dto.payment_request import PaymentProcessRequest

class TestProcessPaymentsUseCase:
    def test_execute_successfully_processes_payments(self):
        # Arrange
        mock_parser_factory = Mock()
        mock_payment_matcher = Mock() 
        mock_status_determiner = Mock()
        mock_report_generator = Mock()
        
        use_case = ProcessPaymentsUseCase(
            parser_factory=mock_parser_factory,
            payment_matcher=mock_payment_matcher,
            status_determiner=mock_status_determiner,
            report_generator=mock_report_generator
        )
        
        request = PaymentProcessRequest(
            garage_file='garages.xlsx',
            statement_file='statement.xlsx'
        )
        
        # Mock –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
        mock_parser_factory.create_parser.return_value.parse_garages.return_value = []
        mock_parser_factory.create_parser.return_value.parse_transactions.return_value = []
        mock_payment_matcher.match_payments.return_value = []
        mock_status_determiner.determine_statuses.return_value = []
        
        # Act
        result = use_case.execute(request)
        
        # Assert
        assert result.success == True
        mock_parser_factory.create_parser.assert_called()
        mock_payment_matcher.match_payments.assert_called_once()
        mock_status_determiner.determine_statuses.assert_called_once()
```

### 8.4 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è TDD

#### pytest.ini
```ini
[tool:pytest]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts = 
    --verbose
    --tb=short
    --cov=src
    --cov-report=html
    --cov-report=term-missing
    --cov-fail-under=80
markers =
    unit: Unit tests
    integration: Integration tests
    slow: Slow running tests
```

#### requirements-dev.txt
```
pytest>=7.0.0
pytest-cov>=4.0.0
pytest-mock>=3.0.0
pytest-xdist>=3.0.0  # Parallel test execution
coverage>=7.0.0
factory-boy>=3.0.0   # Test data factories
freezegun>=1.2.0     # Date mocking
```

#### Makefile –¥–ª—è TDD workflow
```makefile
.PHONY: test test-unit test-integration coverage clean install-dev

# TDD Commands
test:
	pytest

test-unit:
	pytest tests/unit -m "not slow"

test-integration:
	pytest tests/integration

test-fast:
	pytest tests/unit -x --ff

coverage:
	pytest --cov=src --cov-report=html --cov-report=term

# TDD Workflow
tdd:
	pytest --looponfail tests/unit

# Development setup
install-dev:
	pip install -r requirements-dev.txt
	pip install -e .

clean:
	rm -rf .coverage htmlcov/ .pytest_cache/
	find . -type d -name __pycache__ -delete
```

### 8.5 TDD-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

#### –§–∞–±—Ä–∏–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```python
# tests/fixtures/factories.py
import factory
from decimal import Decimal
from datetime import date
from src.core.models.garage import Garage
from src.core.models.transaction import Transaction

class GarageFactory(factory.Factory):
    class Meta:
        model = Garage
    
    id = factory.Sequence(lambda n: str(n))
    monthly_rent = factory.LazyFunction(lambda: Decimal("3500.00"))
    payment_day = 15
    start_date = date(2025, 1, 15)

class TransactionFactory(factory.Factory):
    class Meta:
        model = Transaction
    
    date = date(2025, 6, 15)
    amount = factory.LazyFunction(lambda: Decimal("3500.00"))
    category = "–ü–µ—Ä–µ–≤–æ–¥ –Ω–∞ –∫–∞—Ä—Ç—É"
    source = "bank_statement"
```

#### –¢–µ—Å—Ç–æ–≤—ã–µ –¥—É–±–ª–µ—Ä—ã (Test Doubles)
```python
# tests/fixtures/mock_data.py
class MockStatementParser:
    def __init__(self, transactions=None):
        self.transactions = transactions or []
    
    def parse_transactions(self, source):
        return self.transactions
    
    def validate_source(self, source):
        return True

class MockPaymentMatcher:
    def __init__(self, matches=None):
        self.matches = matches or {}
    
    def match_payments(self, garages, transactions):
        return self.matches
```

### 8.6 TDD —ç—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

#### –≠—Ç–∞–ø 1: –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ (TDD Core)
1. –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è `Garage` –º–æ–¥–µ–ª–∏
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `Garage` –∫–ª–∞—Å—Å 
3. –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è `Payment` –º–æ–¥–µ–ª–∏
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `Payment` –∫–ª–∞—Å—Å
5. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

#### –≠—Ç–∞–ø 2: –°–µ—Ä–≤–∏—Å—ã (TDD Services) 
1. –¢–µ—Å—Ç—ã –¥–ª—è `DateCalculator`
2. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `DateCalculator`
3. –¢–µ—Å—Ç—ã –¥–ª—è `PaymentMatcher`
4. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `PaymentMatcher`
5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤

#### –≠—Ç–∞–ø 3: Use Cases (TDD Application)
1. –¢–µ—Å—Ç—ã –¥–ª—è `ProcessPaymentsUseCase`
2. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è use case —Å –º–æ–∫–∞–º–∏
3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

### 8.6 –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π TDD –ø–æ–¥—Ö–æ–¥

–î–ª—è –Ω–µ–±–æ–ª—å—à–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–∞–≥–º–∞—Ç–∏—á–Ω—ã–π TDD:
- **–ü–∏—à–µ–º —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –ª–æ–≥–∏–∫–∏**: –ø–∞—Ä—Å–∏–Ω–≥, —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π, —Ä–∞—Å—á–µ—Ç –¥–∞—Ç
- **–ü—Ä–æ—Å—Ç—ã–µ —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã**: –±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö –º–æ–∫–æ–≤, —Ñ–æ–∫—É—Å –Ω–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ
- **–ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å**: —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∑–∞ —Å–µ–∫—É–Ω–¥—ã
- **–¢–µ—Å—Ç—ã –∫–∞–∫ –∫—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**: –∫–∞–∂–¥—ã–π —ç—Ç–∞–ø —Å—á–∏—Ç–∞–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–º –ø—Ä–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ —Ç–µ—Å—Ç–æ–≤

TDD –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ: –ø–∏—à–µ–º —Ç–µ—Å—Ç ‚Üí —Ä–µ–∞–ª–∏–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é ‚Üí —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–º –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.